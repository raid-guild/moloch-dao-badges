{"ast":null,"code":"'use strict';\n\nclass KeyValueIndex {\n  constructor() {\n    this._index = {};\n  }\n\n  get(key) {\n    return this._index[key];\n  }\n\n  updateIndex(oplog) {\n    oplog.values.slice().reverse().reduce((handled, item) => {\n      if (!handled.includes(item.payload.key)) {\n        handled.push(item.payload.key);\n\n        if (item.payload.op === 'PUT') {\n          this._index[item.payload.key] = item.payload.value;\n        } else if (item.payload.op === 'DEL') {\n          delete this._index[item.payload.key];\n        }\n      }\n\n      return handled;\n    }, []);\n  }\n\n}\n\nmodule.exports = KeyValueIndex;","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/moloch/moloch-dao-badges/node_modules/orbit-db-kvstore/src/KeyValueIndex.js"],"names":["KeyValueIndex","constructor","_index","get","key","updateIndex","oplog","values","slice","reverse","reduce","handled","item","includes","payload","push","op","value","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,aAAN,CAAoB;AAClBC,EAAAA,WAAW,GAAG;AACZ,SAAKC,MAAL,GAAc,EAAd;AACD;;AAEDC,EAAAA,GAAG,CAACC,GAAD,EAAM;AACP,WAAO,KAAKF,MAAL,CAAYE,GAAZ,CAAP;AACD;;AAEDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjBA,IAAAA,KAAK,CAACC,MAAN,CACGC,KADH,GAEGC,OAFH,GAGGC,MAHH,CAGU,CAACC,OAAD,EAAUC,IAAV,KAAmB;AACzB,UAAG,CAACD,OAAO,CAACE,QAAR,CAAiBD,IAAI,CAACE,OAAL,CAAaV,GAA9B,CAAJ,EAAwC;AACtCO,QAAAA,OAAO,CAACI,IAAR,CAAaH,IAAI,CAACE,OAAL,CAAaV,GAA1B;;AACA,YAAGQ,IAAI,CAACE,OAAL,CAAaE,EAAb,KAAoB,KAAvB,EAA8B;AAC5B,eAAKd,MAAL,CAAYU,IAAI,CAACE,OAAL,CAAaV,GAAzB,IAAgCQ,IAAI,CAACE,OAAL,CAAaG,KAA7C;AACD,SAFD,MAEO,IAAGL,IAAI,CAACE,OAAL,CAAaE,EAAb,KAAoB,KAAvB,EAA8B;AACnC,iBAAO,KAAKd,MAAL,CAAYU,IAAI,CAACE,OAAL,CAAaV,GAAzB,CAAP;AACD;AACF;;AACD,aAAOO,OAAP;AACD,KAbH,EAaK,EAbL;AAcD;;AAxBiB;;AA2BpBO,MAAM,CAACC,OAAP,GAAiBnB,aAAjB","sourcesContent":["'use strict'\n\nclass KeyValueIndex {\n  constructor() {\n    this._index = {}\n  }\n\n  get(key) {\n    return this._index[key]\n  }\n\n  updateIndex(oplog) {\n    oplog.values\n      .slice()\n      .reverse()\n      .reduce((handled, item) => {\n        if(!handled.includes(item.payload.key)) {\n          handled.push(item.payload.key)\n          if(item.payload.op === 'PUT') {\n            this._index[item.payload.key] = item.payload.value\n          } else if(item.payload.op === 'DEL') {\n            delete this._index[item.payload.key]\n          }\n        }\n        return handled\n      }, [])\n  }\n}\n\nmodule.exports = KeyValueIndex\n"]},"metadata":{},"sourceType":"script"}