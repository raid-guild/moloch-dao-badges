{"ast":null,"code":"'use strict';\n\nvar AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN;\n\nvar AbstractChainedBatch = require('abstract-leveldown').AbstractChainedBatch;\n\nvar AbstractIterator = require('abstract-leveldown').AbstractIterator;\n\nvar inherits = require('inherits');\n\nvar Codec = require('level-codec');\n\nvar EncodingError = require('level-errors').EncodingError;\n\nvar rangeMethods = ['approximateSize', 'compactRange'];\nmodule.exports = DB.default = DB;\n\nfunction DB(db, opts) {\n  if (!(this instanceof DB)) return new DB(db, opts);\n  var manifest = db.supports || {};\n  var additionalMethods = manifest.additionalMethods || {};\n  AbstractLevelDOWN.call(this, manifest);\n  this.supports.encodings = true;\n  this.supports.additionalMethods = {};\n  rangeMethods.forEach(function (m) {\n    // TODO (future major): remove this fallback\n    var fallback = typeof db[m] === 'function';\n\n    if (additionalMethods[m] || fallback) {\n      this.supports.additionalMethods[m] = true;\n\n      this[m] = function (start, end, opts, cb) {\n        start = this.codec.encodeKey(start, opts);\n        end = this.codec.encodeKey(end, opts);\n        return this.db[m](start, end, opts, cb);\n      };\n    }\n  }, this);\n  opts = opts || {};\n  if (typeof opts.keyEncoding === 'undefined') opts.keyEncoding = 'utf8';\n  if (typeof opts.valueEncoding === 'undefined') opts.valueEncoding = 'utf8';\n  this.db = db;\n  this.codec = new Codec(opts);\n}\n\ninherits(DB, AbstractLevelDOWN);\nDB.prototype.type = 'encoding-down';\n\nDB.prototype._serializeKey = DB.prototype._serializeValue = function (datum) {\n  return datum;\n};\n\nDB.prototype._open = function (opts, cb) {\n  this.db.open(opts, cb);\n};\n\nDB.prototype._close = function (cb) {\n  this.db.close(cb);\n};\n\nDB.prototype._put = function (key, value, opts, cb) {\n  key = this.codec.encodeKey(key, opts);\n  value = this.codec.encodeValue(value, opts);\n  this.db.put(key, value, opts, cb);\n};\n\nDB.prototype._get = function (key, opts, cb) {\n  var self = this;\n  key = this.codec.encodeKey(key, opts);\n  opts.asBuffer = this.codec.valueAsBuffer(opts);\n  this.db.get(key, opts, function (err, value) {\n    if (err) return cb(err);\n\n    try {\n      value = self.codec.decodeValue(value, opts);\n    } catch (err) {\n      return cb(new EncodingError(err));\n    }\n\n    cb(null, value);\n  });\n};\n\nDB.prototype._del = function (key, opts, cb) {\n  key = this.codec.encodeKey(key, opts);\n  this.db.del(key, opts, cb);\n};\n\nDB.prototype._chainedBatch = function () {\n  return new Batch(this);\n};\n\nDB.prototype._batch = function (ops, opts, cb) {\n  ops = this.codec.encodeBatch(ops, opts);\n  this.db.batch(ops, opts, cb);\n};\n\nDB.prototype._iterator = function (opts) {\n  opts.keyAsBuffer = this.codec.keyAsBuffer(opts);\n  opts.valueAsBuffer = this.codec.valueAsBuffer(opts);\n  return new Iterator(this, opts);\n};\n\nDB.prototype._clear = function (opts, callback) {\n  opts = this.codec.encodeLtgt(opts);\n  this.db.clear(opts, callback);\n};\n\nfunction Iterator(db, opts) {\n  AbstractIterator.call(this, db);\n  this.codec = db.codec;\n  this.keys = opts.keys;\n  this.values = opts.values;\n  this.opts = this.codec.encodeLtgt(opts);\n  this.it = db.db.iterator(this.opts);\n}\n\ninherits(Iterator, AbstractIterator);\n\nIterator.prototype._next = function (cb) {\n  var self = this;\n  this.it.next(function (err, key, value) {\n    if (err) return cb(err);\n\n    try {\n      if (self.keys && typeof key !== 'undefined') {\n        key = self.codec.decodeKey(key, self.opts);\n      } else {\n        key = undefined;\n      }\n\n      if (self.values && typeof value !== 'undefined') {\n        value = self.codec.decodeValue(value, self.opts);\n      } else {\n        value = undefined;\n      }\n    } catch (err) {\n      return cb(new EncodingError(err));\n    }\n\n    cb(null, key, value);\n  });\n};\n\nIterator.prototype._seek = function (key) {\n  key = this.codec.encodeKey(key, this.opts);\n  this.it.seek(key);\n};\n\nIterator.prototype._end = function (cb) {\n  this.it.end(cb);\n};\n\nfunction Batch(db, codec) {\n  AbstractChainedBatch.call(this, db);\n  this.codec = db.codec;\n  this.batch = db.db.batch();\n}\n\ninherits(Batch, AbstractChainedBatch);\n\nBatch.prototype._put = function (key, value) {\n  key = this.codec.encodeKey(key);\n  value = this.codec.encodeValue(value);\n  this.batch.put(key, value);\n};\n\nBatch.prototype._del = function (key) {\n  key = this.codec.encodeKey(key);\n  this.batch.del(key);\n};\n\nBatch.prototype._clear = function () {\n  this.batch.clear();\n};\n\nBatch.prototype._write = function (opts, cb) {\n  this.batch.write(opts, cb);\n};","map":{"version":3,"sources":["/home/dekan/Projects/raid-guild/dao-badges-web/node_modules/encoding-down/index.js"],"names":["AbstractLevelDOWN","require","AbstractChainedBatch","AbstractIterator","inherits","Codec","EncodingError","rangeMethods","module","exports","DB","default","db","opts","manifest","supports","additionalMethods","call","encodings","forEach","m","fallback","start","end","cb","codec","encodeKey","keyEncoding","valueEncoding","prototype","type","_serializeKey","_serializeValue","datum","_open","open","_close","close","_put","key","value","encodeValue","put","_get","self","asBuffer","valueAsBuffer","get","err","decodeValue","_del","del","_chainedBatch","Batch","_batch","ops","encodeBatch","batch","_iterator","keyAsBuffer","Iterator","_clear","callback","encodeLtgt","clear","keys","values","it","iterator","_next","next","decodeKey","undefined","_seek","seek","_end","_write","write"],"mappings":"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","sourcesContent":["'use strict'\n\nvar AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN\nvar AbstractChainedBatch = require('abstract-leveldown').AbstractChainedBatch\nvar AbstractIterator = require('abstract-leveldown').AbstractIterator\nvar inherits = require('inherits')\nvar Codec = require('level-codec')\nvar EncodingError = require('level-errors').EncodingError\nvar rangeMethods = ['approximateSize', 'compactRange']\n\nmodule.exports = DB.default = DB\n\nfunction DB (db, opts) {\n  if (!(this instanceof DB)) return new DB(db, opts)\n\n  var manifest = db.supports || {}\n  var additionalMethods = manifest.additionalMethods || {}\n\n  AbstractLevelDOWN.call(this, manifest)\n\n  this.supports.encodings = true\n  this.supports.additionalMethods = {}\n\n  rangeMethods.forEach(function (m) {\n    // TODO (future major): remove this fallback\n    var fallback = typeof db[m] === 'function'\n\n    if (additionalMethods[m] || fallback) {\n      this.supports.additionalMethods[m] = true\n\n      this[m] = function (start, end, opts, cb) {\n        start = this.codec.encodeKey(start, opts)\n        end = this.codec.encodeKey(end, opts)\n        return this.db[m](start, end, opts, cb)\n      }\n    }\n  }, this)\n\n  opts = opts || {}\n  if (typeof opts.keyEncoding === 'undefined') opts.keyEncoding = 'utf8'\n  if (typeof opts.valueEncoding === 'undefined') opts.valueEncoding = 'utf8'\n\n  this.db = db\n  this.codec = new Codec(opts)\n}\n\ninherits(DB, AbstractLevelDOWN)\n\nDB.prototype.type = 'encoding-down'\n\nDB.prototype._serializeKey =\nDB.prototype._serializeValue = function (datum) {\n  return datum\n}\n\nDB.prototype._open = function (opts, cb) {\n  this.db.open(opts, cb)\n}\n\nDB.prototype._close = function (cb) {\n  this.db.close(cb)\n}\n\nDB.prototype._put = function (key, value, opts, cb) {\n  key = this.codec.encodeKey(key, opts)\n  value = this.codec.encodeValue(value, opts)\n  this.db.put(key, value, opts, cb)\n}\n\nDB.prototype._get = function (key, opts, cb) {\n  var self = this\n  key = this.codec.encodeKey(key, opts)\n  opts.asBuffer = this.codec.valueAsBuffer(opts)\n  this.db.get(key, opts, function (err, value) {\n    if (err) return cb(err)\n    try {\n      value = self.codec.decodeValue(value, opts)\n    } catch (err) {\n      return cb(new EncodingError(err))\n    }\n    cb(null, value)\n  })\n}\n\nDB.prototype._del = function (key, opts, cb) {\n  key = this.codec.encodeKey(key, opts)\n  this.db.del(key, opts, cb)\n}\n\nDB.prototype._chainedBatch = function () {\n  return new Batch(this)\n}\n\nDB.prototype._batch = function (ops, opts, cb) {\n  ops = this.codec.encodeBatch(ops, opts)\n  this.db.batch(ops, opts, cb)\n}\n\nDB.prototype._iterator = function (opts) {\n  opts.keyAsBuffer = this.codec.keyAsBuffer(opts)\n  opts.valueAsBuffer = this.codec.valueAsBuffer(opts)\n  return new Iterator(this, opts)\n}\n\nDB.prototype._clear = function (opts, callback) {\n  opts = this.codec.encodeLtgt(opts)\n  this.db.clear(opts, callback)\n}\n\nfunction Iterator (db, opts) {\n  AbstractIterator.call(this, db)\n  this.codec = db.codec\n  this.keys = opts.keys\n  this.values = opts.values\n  this.opts = this.codec.encodeLtgt(opts)\n  this.it = db.db.iterator(this.opts)\n}\n\ninherits(Iterator, AbstractIterator)\n\nIterator.prototype._next = function (cb) {\n  var self = this\n  this.it.next(function (err, key, value) {\n    if (err) return cb(err)\n    try {\n      if (self.keys && typeof key !== 'undefined') {\n        key = self.codec.decodeKey(key, self.opts)\n      } else {\n        key = undefined\n      }\n\n      if (self.values && typeof value !== 'undefined') {\n        value = self.codec.decodeValue(value, self.opts)\n      } else {\n        value = undefined\n      }\n    } catch (err) {\n      return cb(new EncodingError(err))\n    }\n    cb(null, key, value)\n  })\n}\n\nIterator.prototype._seek = function (key) {\n  key = this.codec.encodeKey(key, this.opts)\n  this.it.seek(key)\n}\n\nIterator.prototype._end = function (cb) {\n  this.it.end(cb)\n}\n\nfunction Batch (db, codec) {\n  AbstractChainedBatch.call(this, db)\n  this.codec = db.codec\n  this.batch = db.db.batch()\n}\n\ninherits(Batch, AbstractChainedBatch)\n\nBatch.prototype._put = function (key, value) {\n  key = this.codec.encodeKey(key)\n  value = this.codec.encodeValue(value)\n  this.batch.put(key, value)\n}\n\nBatch.prototype._del = function (key) {\n  key = this.codec.encodeKey(key)\n  this.batch.del(key)\n}\n\nBatch.prototype._clear = function () {\n  this.batch.clear()\n}\n\nBatch.prototype._write = function (opts, cb) {\n  this.batch.write(opts, cb)\n}\n"]},"metadata":{},"sourceType":"script"}