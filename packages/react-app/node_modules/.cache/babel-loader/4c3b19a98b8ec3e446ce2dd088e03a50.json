{"ast":null,"code":"'use strict';\n\nconst Counter = require('crdts/src/G-Counter');\n\nclass CounterIndex {\n  constructor(id) {\n    this._index = new Counter(id);\n  }\n\n  get() {\n    return this._index;\n  }\n\n  updateIndex(oplog) {\n    if (this._index) {\n      const createCounter = e => Counter.from(e.payload.value);\n\n      const mergeToIndex = e => this._index.merge(e);\n\n      oplog.values.filter(e => e && e.payload.op === 'COUNTER').map(createCounter).forEach(mergeToIndex);\n    }\n  }\n\n}\n\nmodule.exports = CounterIndex;","map":{"version":3,"sources":["/home/dekan/Projects/raid-guild/dao-badges-web/node_modules/orbit-db-counterstore/src/CounterIndex.js"],"names":["Counter","require","CounterIndex","constructor","id","_index","get","updateIndex","oplog","createCounter","e","from","payload","value","mergeToIndex","merge","values","filter","op","map","forEach","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AAEA,MAAMC,YAAN,CAAmB;AACjBC,EAAAA,WAAW,CAAEC,EAAF,EAAM;AACf,SAAKC,MAAL,GAAc,IAAIL,OAAJ,CAAYI,EAAZ,CAAd;AACD;;AAEDE,EAAAA,GAAG,GAAI;AACL,WAAO,KAAKD,MAAZ;AACD;;AAEDE,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,QAAI,KAAKH,MAAT,EAAiB;AACf,YAAMI,aAAa,GAAGC,CAAC,IAAIV,OAAO,CAACW,IAAR,CAAaD,CAAC,CAACE,OAAF,CAAUC,KAAvB,CAA3B;;AACA,YAAMC,YAAY,GAAGJ,CAAC,IAAI,KAAKL,MAAL,CAAYU,KAAZ,CAAkBL,CAAlB,CAA1B;;AACAF,MAAAA,KAAK,CAACQ,MAAN,CAAaC,MAAb,CAAoBP,CAAC,IAAIA,CAAC,IAAIA,CAAC,CAACE,OAAF,CAAUM,EAAV,KAAiB,SAA/C,EACGC,GADH,CACOV,aADP,EAEGW,OAFH,CAEWN,YAFX;AAGD;AACF;;AAjBgB;;AAoBnBO,MAAM,CAACC,OAAP,GAAiBpB,YAAjB","sourcesContent":["'use strict'\n\nconst Counter = require('crdts/src/G-Counter')\n\nclass CounterIndex {\n  constructor (id) {\n    this._index = new Counter(id)\n  }\n\n  get () {\n    return this._index\n  }\n\n  updateIndex (oplog) {\n    if (this._index) {\n      const createCounter = e => Counter.from(e.payload.value)\n      const mergeToIndex = e => this._index.merge(e)\n      oplog.values.filter(e => e && e.payload.op === 'COUNTER')\n        .map(createCounter)\n        .forEach(mergeToIndex)\n    }\n  }\n}\n\nmodule.exports = CounterIndex\n"]},"metadata":{},"sourceType":"script"}