{"ast":null,"code":"var inherits = require('inherits');\n\nvar Readable = require('readable-stream').Readable;\n\nvar extend = require('xtend');\n\nmodule.exports = ReadStream;\ninherits(ReadStream, Readable);\n\nfunction ReadStream(iterator, options) {\n  if (!(this instanceof ReadStream)) return new ReadStream(iterator, options);\n  options = options || {};\n  Readable.call(this, extend(options, {\n    objectMode: true\n  }));\n  this._iterator = iterator;\n  this._options = options;\n  this.on('end', this.destroy.bind(this, null, null));\n}\n\nReadStream.prototype._read = function () {\n  var self = this;\n  var options = this._options;\n  if (this.destroyed) return;\n\n  this._iterator.next(function (err, key, value) {\n    if (self.destroyed) return;\n    if (err) return self.destroy(err);\n\n    if (key === undefined && value === undefined) {\n      self.push(null);\n    } else if (options.keys !== false && options.values === false) {\n      self.push(key);\n    } else if (options.keys === false && options.values !== false) {\n      self.push(value);\n    } else {\n      self.push({\n        key: key,\n        value: value\n      });\n    }\n  });\n};\n\nReadStream.prototype._destroy = function (err, callback) {\n  this._iterator.end(function (err2) {\n    callback(err || err2);\n  });\n};","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/moloch/moloch-dao-badges/node_modules/level-iterator-stream/index.js"],"names":["inherits","require","Readable","extend","module","exports","ReadStream","iterator","options","call","objectMode","_iterator","_options","on","destroy","bind","prototype","_read","self","destroyed","next","err","key","value","undefined","push","keys","values","_destroy","callback","end","err2"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,iBAAD,CAAP,CAA2BC,QAA1C;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAAC,OAAD,CAApB;;AAEAG,MAAM,CAACC,OAAP,GAAiBC,UAAjB;AACAN,QAAQ,CAACM,UAAD,EAAaJ,QAAb,CAAR;;AAEA,SAASI,UAAT,CAAqBC,QAArB,EAA+BC,OAA/B,EAAwC;AACtC,MAAI,EAAE,gBAAgBF,UAAlB,CAAJ,EAAmC,OAAO,IAAIA,UAAJ,CAAeC,QAAf,EAAyBC,OAAzB,CAAP;AACnCA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAN,EAAAA,QAAQ,CAACO,IAAT,CAAc,IAAd,EAAoBN,MAAM,CAACK,OAAD,EAAU;AAClCE,IAAAA,UAAU,EAAE;AADsB,GAAV,CAA1B;AAGA,OAAKC,SAAL,GAAiBJ,QAAjB;AACA,OAAKK,QAAL,GAAgBJ,OAAhB;AACA,OAAKK,EAAL,CAAQ,KAAR,EAAe,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,EAAwB,IAAxB,EAA8B,IAA9B,CAAf;AACD;;AAEDT,UAAU,CAACU,SAAX,CAAqBC,KAArB,GAA6B,YAAY;AACvC,MAAIC,IAAI,GAAG,IAAX;AACA,MAAIV,OAAO,GAAG,KAAKI,QAAnB;AACA,MAAI,KAAKO,SAAT,EAAoB;;AAEpB,OAAKR,SAAL,CAAeS,IAAf,CAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,KAApB,EAA2B;AAC7C,QAAIL,IAAI,CAACC,SAAT,EAAoB;AACpB,QAAIE,GAAJ,EAAS,OAAOH,IAAI,CAACJ,OAAL,CAAaO,GAAb,CAAP;;AAET,QAAIC,GAAG,KAAKE,SAAR,IAAqBD,KAAK,KAAKC,SAAnC,EAA8C;AAC5CN,MAAAA,IAAI,CAACO,IAAL,CAAU,IAAV;AACD,KAFD,MAEO,IAAIjB,OAAO,CAACkB,IAAR,KAAiB,KAAjB,IAA0BlB,OAAO,CAACmB,MAAR,KAAmB,KAAjD,EAAwD;AAC7DT,MAAAA,IAAI,CAACO,IAAL,CAAUH,GAAV;AACD,KAFM,MAEA,IAAId,OAAO,CAACkB,IAAR,KAAiB,KAAjB,IAA0BlB,OAAO,CAACmB,MAAR,KAAmB,KAAjD,EAAwD;AAC7DT,MAAAA,IAAI,CAACO,IAAL,CAAUF,KAAV;AACD,KAFM,MAEA;AACLL,MAAAA,IAAI,CAACO,IAAL,CAAU;AAAEH,QAAAA,GAAG,EAAEA,GAAP;AAAYC,QAAAA,KAAK,EAAEA;AAAnB,OAAV;AACD;AACF,GAbD;AAcD,CAnBD;;AAqBAjB,UAAU,CAACU,SAAX,CAAqBY,QAArB,GAAgC,UAAUP,GAAV,EAAeQ,QAAf,EAAyB;AACvD,OAAKlB,SAAL,CAAemB,GAAf,CAAmB,UAAUC,IAAV,EAAgB;AACjCF,IAAAA,QAAQ,CAACR,GAAG,IAAIU,IAAR,CAAR;AACD,GAFD;AAGD,CAJD","sourcesContent":["var inherits = require('inherits')\nvar Readable = require('readable-stream').Readable\nvar extend = require('xtend')\n\nmodule.exports = ReadStream\ninherits(ReadStream, Readable)\n\nfunction ReadStream (iterator, options) {\n  if (!(this instanceof ReadStream)) return new ReadStream(iterator, options)\n  options = options || {}\n  Readable.call(this, extend(options, {\n    objectMode: true\n  }))\n  this._iterator = iterator\n  this._options = options\n  this.on('end', this.destroy.bind(this, null, null))\n}\n\nReadStream.prototype._read = function () {\n  var self = this\n  var options = this._options\n  if (this.destroyed) return\n\n  this._iterator.next(function (err, key, value) {\n    if (self.destroyed) return\n    if (err) return self.destroy(err)\n\n    if (key === undefined && value === undefined) {\n      self.push(null)\n    } else if (options.keys !== false && options.values === false) {\n      self.push(key)\n    } else if (options.keys === false && options.values !== false) {\n      self.push(value)\n    } else {\n      self.push({ key: key, value: value })\n    }\n  })\n}\n\nReadStream.prototype._destroy = function (err, callback) {\n  this._iterator.end(function (err2) {\n    callback(err || err2)\n  })\n}\n"]},"metadata":{},"sourceType":"script"}