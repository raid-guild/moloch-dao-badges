{"ast":null,"code":"function AbstractIterator(db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store');\n  }\n\n  this.db = db;\n  this._ended = false;\n  this._nexting = false;\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  var self = this;\n\n  if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument');\n  }\n\n  if (self._ended) {\n    process.nextTick(callback, new Error('cannot call next() after end()'));\n    return self;\n  }\n\n  if (self._nexting) {\n    process.nextTick(callback, new Error('cannot call next() before previous next() has completed'));\n    return self;\n  }\n\n  self._nexting = true;\n\n  self._next(function () {\n    self._nexting = false;\n    callback.apply(null, arguments);\n  });\n\n  return self;\n};\n\nAbstractIterator.prototype._next = function (callback) {\n  process.nextTick(callback);\n};\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()');\n  }\n\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed');\n  }\n\n  target = this.db._serializeKey(target);\n\n  this._seek(target);\n};\n\nAbstractIterator.prototype._seek = function (target) {};\n\nAbstractIterator.prototype.end = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument');\n  }\n\n  if (this._ended) {\n    return process.nextTick(callback, new Error('end() already called on iterator'));\n  }\n\n  this._ended = true;\n\n  this._end(callback);\n};\n\nAbstractIterator.prototype._end = function (callback) {\n  process.nextTick(callback);\n};\n\nmodule.exports = AbstractIterator;","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/moloch/moloch-dao-badges/node_modules/encoding-down/node_modules/abstract-leveldown/abstract-iterator.js"],"names":["AbstractIterator","db","TypeError","_ended","_nexting","prototype","next","callback","self","Error","process","nextTick","_next","apply","arguments","seek","target","_serializeKey","_seek","end","_end","module","exports"],"mappings":"AAAA,SAASA,gBAAT,CAA2BC,EAA3B,EAA+B;AAC7B,MAAI,OAAOA,EAAP,KAAc,QAAd,IAA0BA,EAAE,KAAK,IAArC,EAA2C;AACzC,UAAM,IAAIC,SAAJ,CAAc,8DAAd,CAAN;AACD;;AAED,OAAKD,EAAL,GAAUA,EAAV;AACA,OAAKE,MAAL,GAAc,KAAd;AACA,OAAKC,QAAL,GAAgB,KAAhB;AACD;;AAEDJ,gBAAgB,CAACK,SAAjB,CAA2BC,IAA3B,GAAkC,UAAUC,QAAV,EAAoB;AACpD,MAAIC,IAAI,GAAG,IAAX;;AAEA,MAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAClC,UAAM,IAAIE,KAAJ,CAAU,qCAAV,CAAN;AACD;;AAED,MAAID,IAAI,CAACL,MAAT,EAAiB;AACfO,IAAAA,OAAO,CAACC,QAAR,CAAiBJ,QAAjB,EAA2B,IAAIE,KAAJ,CAAU,gCAAV,CAA3B;AACA,WAAOD,IAAP;AACD;;AAED,MAAIA,IAAI,CAACJ,QAAT,EAAmB;AACjBM,IAAAA,OAAO,CAACC,QAAR,CAAiBJ,QAAjB,EAA2B,IAAIE,KAAJ,CAAU,yDAAV,CAA3B;AACA,WAAOD,IAAP;AACD;;AAEDA,EAAAA,IAAI,CAACJ,QAAL,GAAgB,IAAhB;;AACAI,EAAAA,IAAI,CAACI,KAAL,CAAW,YAAY;AACrBJ,IAAAA,IAAI,CAACJ,QAAL,GAAgB,KAAhB;AACAG,IAAAA,QAAQ,CAACM,KAAT,CAAe,IAAf,EAAqBC,SAArB;AACD,GAHD;;AAKA,SAAON,IAAP;AACD,CAxBD;;AA0BAR,gBAAgB,CAACK,SAAjB,CAA2BO,KAA3B,GAAmC,UAAUL,QAAV,EAAoB;AACrDG,EAAAA,OAAO,CAACC,QAAR,CAAiBJ,QAAjB;AACD,CAFD;;AAIAP,gBAAgB,CAACK,SAAjB,CAA2BU,IAA3B,GAAkC,UAAUC,MAAV,EAAkB;AAClD,MAAI,KAAKb,MAAT,EAAiB;AACf,UAAM,IAAIM,KAAJ,CAAU,gCAAV,CAAN;AACD;;AACD,MAAI,KAAKL,QAAT,EAAmB;AACjB,UAAM,IAAIK,KAAJ,CAAU,gDAAV,CAAN;AACD;;AAEDO,EAAAA,MAAM,GAAG,KAAKf,EAAL,CAAQgB,aAAR,CAAsBD,MAAtB,CAAT;;AACA,OAAKE,KAAL,CAAWF,MAAX;AACD,CAVD;;AAYAhB,gBAAgB,CAACK,SAAjB,CAA2Ba,KAA3B,GAAmC,UAAUF,MAAV,EAAkB,CAAE,CAAvD;;AAEAhB,gBAAgB,CAACK,SAAjB,CAA2Bc,GAA3B,GAAiC,UAAUZ,QAAV,EAAoB;AACnD,MAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,UAAM,IAAIE,KAAJ,CAAU,oCAAV,CAAN;AACD;;AAED,MAAI,KAAKN,MAAT,EAAiB;AACf,WAAOO,OAAO,CAACC,QAAR,CAAiBJ,QAAjB,EAA2B,IAAIE,KAAJ,CAAU,kCAAV,CAA3B,CAAP;AACD;;AAED,OAAKN,MAAL,GAAc,IAAd;;AACA,OAAKiB,IAAL,CAAUb,QAAV;AACD,CAXD;;AAaAP,gBAAgB,CAACK,SAAjB,CAA2Be,IAA3B,GAAkC,UAAUb,QAAV,EAAoB;AACpDG,EAAAA,OAAO,CAACC,QAAR,CAAiBJ,QAAjB;AACD,CAFD;;AAIAc,MAAM,CAACC,OAAP,GAAiBtB,gBAAjB","sourcesContent":["function AbstractIterator (db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store')\n  }\n\n  this.db = db\n  this._ended = false\n  this._nexting = false\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  var self = this\n\n  if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument')\n  }\n\n  if (self._ended) {\n    process.nextTick(callback, new Error('cannot call next() after end()'))\n    return self\n  }\n\n  if (self._nexting) {\n    process.nextTick(callback, new Error('cannot call next() before previous next() has completed'))\n    return self\n  }\n\n  self._nexting = true\n  self._next(function () {\n    self._nexting = false\n    callback.apply(null, arguments)\n  })\n\n  return self\n}\n\nAbstractIterator.prototype._next = function (callback) {\n  process.nextTick(callback)\n}\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()')\n  }\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed')\n  }\n\n  target = this.db._serializeKey(target)\n  this._seek(target)\n}\n\nAbstractIterator.prototype._seek = function (target) {}\n\nAbstractIterator.prototype.end = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument')\n  }\n\n  if (this._ended) {\n    return process.nextTick(callback, new Error('end() already called on iterator'))\n  }\n\n  this._ended = true\n  this._end(callback)\n}\n\nAbstractIterator.prototype._end = function (callback) {\n  process.nextTick(callback)\n}\n\nmodule.exports = AbstractIterator\n"]},"metadata":{},"sourceType":"script"}