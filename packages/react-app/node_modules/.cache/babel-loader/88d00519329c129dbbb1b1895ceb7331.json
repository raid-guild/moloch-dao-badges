{"ast":null,"code":"'use strict';\n\nvar getTime = require('./time');\n\nfunction Retimer(callback, timeout, args) {\n  var that = this;\n  this._started = getTime();\n  this._rescheduled = 0;\n  this._scheduled = timeout;\n  this._args = args;\n  this._timer = setTimeout(timerWrapper, timeout);\n\n  function timerWrapper() {\n    if (that._rescheduled > 0) {\n      that._scheduled = that._rescheduled - (getTime() - that._started);\n      that._timer = setTimeout(timerWrapper, that._scheduled);\n      that._rescheduled = 0;\n    } else {\n      callback.apply(null, that._args);\n    }\n  }\n}\n\nRetimer.prototype.reschedule = function (timeout) {\n  var now = getTime();\n\n  if (now + timeout - (this._started + this._scheduled) < 0) {\n    return false;\n  } else {\n    this._started = now;\n    this._rescheduled = timeout;\n    return true;\n  }\n};\n\nRetimer.prototype.clear = function () {\n  clearTimeout(this._timer);\n};\n\nfunction retimer() {\n  if (typeof arguments[0] !== 'function') {\n    throw new Error('callback needed');\n  }\n\n  if (typeof arguments[1] !== 'number') {\n    throw new Error('timeout needed');\n  }\n\n  var args;\n\n  if (arguments.length > 0) {\n    args = new Array(arguments.length - 2);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 2];\n    }\n  }\n\n  return new Retimer(arguments[0], arguments[1], args);\n}\n\nmodule.exports = retimer;","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/moloch/moloch-dao-badges/node_modules/retimer/retimer.js"],"names":["getTime","require","Retimer","callback","timeout","args","that","_started","_rescheduled","_scheduled","_args","_timer","setTimeout","timerWrapper","apply","prototype","reschedule","now","clear","clearTimeout","retimer","arguments","Error","length","Array","i","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,OAAO,GAAGC,OAAO,CAAC,QAAD,CAArB;;AAEA,SAASC,OAAT,CAAkBC,QAAlB,EAA4BC,OAA5B,EAAqCC,IAArC,EAA2C;AACzC,MAAIC,IAAI,GAAG,IAAX;AAEA,OAAKC,QAAL,GAAgBP,OAAO,EAAvB;AACA,OAAKQ,YAAL,GAAoB,CAApB;AACA,OAAKC,UAAL,GAAkBL,OAAlB;AACA,OAAKM,KAAL,GAAaL,IAAb;AAEA,OAAKM,MAAL,GAAcC,UAAU,CAACC,YAAD,EAAeT,OAAf,CAAxB;;AAEA,WAASS,YAAT,GAAyB;AACvB,QAAIP,IAAI,CAACE,YAAL,GAAoB,CAAxB,EAA2B;AACzBF,MAAAA,IAAI,CAACG,UAAL,GAAkBH,IAAI,CAACE,YAAL,IAAqBR,OAAO,KAAKM,IAAI,CAACC,QAAtC,CAAlB;AACAD,MAAAA,IAAI,CAACK,MAAL,GAAcC,UAAU,CAACC,YAAD,EAAeP,IAAI,CAACG,UAApB,CAAxB;AACAH,MAAAA,IAAI,CAACE,YAAL,GAAoB,CAApB;AACD,KAJD,MAIO;AACLL,MAAAA,QAAQ,CAACW,KAAT,CAAe,IAAf,EAAqBR,IAAI,CAACI,KAA1B;AACD;AACF;AACF;;AAEDR,OAAO,CAACa,SAAR,CAAkBC,UAAlB,GAA+B,UAAUZ,OAAV,EAAmB;AAChD,MAAIa,GAAG,GAAGjB,OAAO,EAAjB;;AACA,MAAKiB,GAAG,GAAGb,OAAP,IAAmB,KAAKG,QAAL,GAAgB,KAAKE,UAAxC,IAAsD,CAA1D,EAA6D;AAC3D,WAAO,KAAP;AACD,GAFD,MAEO;AACL,SAAKF,QAAL,GAAgBU,GAAhB;AACA,SAAKT,YAAL,GAAoBJ,OAApB;AACA,WAAO,IAAP;AACD;AACF,CATD;;AAWAF,OAAO,CAACa,SAAR,CAAkBG,KAAlB,GAA0B,YAAY;AACpCC,EAAAA,YAAY,CAAC,KAAKR,MAAN,CAAZ;AACD,CAFD;;AAIA,SAASS,OAAT,GAAoB;AAClB,MAAI,OAAOC,SAAS,CAAC,CAAD,CAAhB,KAAwB,UAA5B,EAAwC;AACtC,UAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;AACD;;AAED,MAAI,OAAOD,SAAS,CAAC,CAAD,CAAhB,KAAwB,QAA5B,EAAsC;AACpC,UAAM,IAAIC,KAAJ,CAAU,gBAAV,CAAN;AACD;;AAED,MAAIjB,IAAJ;;AAEA,MAAIgB,SAAS,CAACE,MAAV,GAAmB,CAAvB,EAA0B;AACxBlB,IAAAA,IAAI,GAAG,IAAImB,KAAJ,CAAUH,SAAS,CAACE,MAAV,GAAmB,CAA7B,CAAP;;AAEA,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,IAAI,CAACkB,MAAzB,EAAiCE,CAAC,EAAlC,EAAsC;AACpCpB,MAAAA,IAAI,CAACoB,CAAD,CAAJ,GAAUJ,SAAS,CAACI,CAAC,GAAG,CAAL,CAAnB;AACD;AACF;;AAED,SAAO,IAAIvB,OAAJ,CAAYmB,SAAS,CAAC,CAAD,CAArB,EAA0BA,SAAS,CAAC,CAAD,CAAnC,EAAwChB,IAAxC,CAAP;AACD;;AAEDqB,MAAM,CAACC,OAAP,GAAiBP,OAAjB","sourcesContent":["'use strict'\n\nvar getTime = require('./time')\n\nfunction Retimer (callback, timeout, args) {\n  var that = this\n\n  this._started = getTime()\n  this._rescheduled = 0\n  this._scheduled = timeout\n  this._args = args\n\n  this._timer = setTimeout(timerWrapper, timeout)\n\n  function timerWrapper () {\n    if (that._rescheduled > 0) {\n      that._scheduled = that._rescheduled - (getTime() - that._started)\n      that._timer = setTimeout(timerWrapper, that._scheduled)\n      that._rescheduled = 0\n    } else {\n      callback.apply(null, that._args)\n    }\n  }\n}\n\nRetimer.prototype.reschedule = function (timeout) {\n  var now = getTime()\n  if ((now + timeout) - (this._started + this._scheduled) < 0) {\n    return false\n  } else {\n    this._started = now\n    this._rescheduled = timeout\n    return true\n  }\n}\n\nRetimer.prototype.clear = function () {\n  clearTimeout(this._timer)\n}\n\nfunction retimer () {\n  if (typeof arguments[0] !== 'function') {\n    throw new Error('callback needed')\n  }\n\n  if (typeof arguments[1] !== 'number') {\n    throw new Error('timeout needed')\n  }\n\n  var args\n\n  if (arguments.length > 0) {\n    args = new Array(arguments.length - 2)\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 2]\n    }\n  }\n\n  return new Retimer(arguments[0], arguments[1], args)\n}\n\nmodule.exports = retimer\n"]},"metadata":{},"sourceType":"script"}